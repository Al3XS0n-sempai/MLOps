# Папка с решение ДЗ 1
## Table of content:
1. [Описание решение](#desc)
2. [Как вопсроизвести](#how)


---
<a id="desc"></a>

### Описание решения
В качетсве основы в своем решения был взять репозиторий курса, написана самая простая версия `ReLU(const std::vector<double>)`. [setup.py](setup.py) также написан на основе того, что был в репозитории. То есть по сути большая часть моей работы заключена в том, что я сделал дальше:  

1. 
    [Dockerfile](Dockerfile): написан полнсостью моими руками, я разбил его на несколько этапов (слоев если угодно). 
    - Первый представляет из себя установку пакетов для системы (по сути подготовка к компиляции). 
    - Второй компилирует модель в динамическуб библиотеку (при помощи [Makefil'а](Makefile) который так же был любезно предоставлен в репозитории курса). 
    - Третий этап устанавливает зависимости необходимые для сборки пакета (setuptools и build)
    - На четвертом этапе запускается pytest который запустит [тесты](tests.py) на корректность модуля  (по сути unit-тесты)
    - Финальный этап содержит установку зависимостей (pytorch, tensorflow) и команду для запуска тестов производительности.
    
    Docker образ собирался обычной командой:
    ```shellsession
    foo@bar:~$ docker build -t al3xs0n/relu_module:0.0.1 .
    ```
    И загружен в docker hub:
    ```shellsession
    foo@bar:~$ docker push al3xs0n/relu_module:0.0.1
    ```
2.  [perf_tests.py](perf_test.py) - содержит тест производительности. В нем генерируются входные вектора разных размерностей (от 100 до 300 тысяч). И таких векторов по генерируется 1 млн. Потом запускается профайлер cProfile который поочередно считает ReLU от каждого вектора и замеряет количество вызовов и время выполнения.


---
<a id="desc"></a>

### Как воспроизвести

1. 
    Способ 1. Можно скачать репозиторий и выполнить следующие действия:
    - Скачать pybind11 (`pip install pybind11`)
    - Собрать so файл командой make relu
    - Скачать setuptools и build (`pip install setuptools build`)
    - Собрать python модуль командой `python -m build`
    - Скачать pytest (`pip install pytest`)
    - Запустить unit-тесты командой `pytest tests.py`
    - Если тесты успешно отработали, запустить тесты на производительность `python perf_tests.py` (предварительно скачав pytorch и tensorflow)
2. 
    Способ 2. Очень просто (очень надеюсь что работает т. к. не тестил скачивание образа):
    - `docker run -it al3xs0n/relu_module:0.0.1`